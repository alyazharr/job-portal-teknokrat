{% extends 'base.html' %}
{% load static %}

{% block meta %}
  <link rel="stylesheet" href="{% static 'jobseeker/style.css' %}">
{% endblock meta %}

{% block content %}
  {% if form.non_field_errors %}
    <div class="toast-container position-fixed" style="right:3%;bottom:3%">
      {% for error in form.non_field_errors %}
        <div class="toast align-items-center  border border-warning border-1" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="d-flex">
            <div class="toast-body">
              {{ error }}
            </div>
            <button type="button" class="btn-close btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
          {% endfor %}
    </div>
  {% endif %}

  <div class="align-self-center container w-75">
    <form id="form-edit" style="box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;" class="border form-control fw-bold rounded gap-2 d-flex flex-column my-5 mb-1 p-3" method="post">
      {% csrf_token %}
      {% if form.posisi.value %}
        <h3 class="fw-bold">Edit Lowongan</h3>
      {% else %}
        <h3 class="fw-bold">Buka Lowongan</h3>
      {% endif %}
      <label for="{{ form.posisi.id_for_label }}">Posisi</label>
      {{ form.posisi }} 
      {% if form.errors.gaji %}
        <div class="text-danger">
          {% for error in form.errors.posisi %}
          <span>{{ error }}</span><br>
          {% endfor %}
        </div>
      {% endif %}
      <label for="{{ form.gaji.id_for_label }}">Gaji</label>
      {{ form.gaji }} 
      {% if form.errors.gaji %}
        <div class="text-danger">
          {% for error in form.errors.gaji %}
          <span>{{ error }}</span><br>
          {% endfor %}
        </div>
      {% endif %}
      <label for="{{ form.lama_pengalaman.id_for_label }}">Lama Pengalaman</label>
      {{ form.lama_pengalaman }}   
      {% if form.errors.lama_pengalaman %}
        <div class="text-danger">
          {% for error in form.errors.lama_pengalaman %}
          <span>{{ error }}</span><br>
          {% endfor %}
        </div>
      {% endif %}
      <label for="{{ form.deskripsi.id_for_label }}">Deskripsi</label>
      {{ form.deskripsi }}   
      {% if form.errors.deskripsi %}
        <div class="text-danger">
          {% for error in form.errors.deskripsi %}
          <span>{{ error }}</span><br>
          {% endfor %}
        </div>
    {% endif %}
      <label for="{{ form.requirements.id_for_label }}">Prasyarat</label>
      {{ form.requirements }} 
      {% if form.errors.requirements %}
        <div class="text-danger">
          {% for error in form.errors.requirements %}
          <span>{{ error }}</span><br>
          {% endfor %}
        </div>
      {% endif %}
      <div id="lowongan-date" class="row">
        <div class="col-5">
          <label for="{{ form.buka_lowongan.id_for_label }}">Tanggal Pembukaan</label>
          <input type="date" name="buka_lowongan" id="{{ form.buka_lowongan.id_for_label }}" 
          class="form-control"
          value="{{form.buka_lowongan.value|date:'Y-m-d'}}"/>
          {% if form.errors.buka_lowongan %}
            <div class="text-danger">
              {% for error in form.errors.buka_lowongan %}
              <span>{{ error }}</span><br>
              {% endfor %}
            </div>
          {% endif %}
        </div>
  
        <div class="col-5">
          <label for="{{ form.batas_pengumpulan.id_for_label }}">Tanggal Penutupan</label>
          <input type="date" name="batas_pengumpulan" id="{{ form.batas_pengumpulan.id_for_label }}" 
          class="form-control"
          value="{{form.batas_pengumpulan.value|date:'Y-m-d'}}"/>
          {% if form.errors.batas_pengumpulan %}
            <div class="text-danger">
              {% for error in form.errors.batas_pengumpulan %}
              <span>{{ error }}</span><br>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
    </form>
    {% if form.posisi.value %}
      <input class="mt-3 mb-5 btn btn-primary bg-base-blue" type="submit" form="form-edit" value="Simpan Perubahan" />
    {% else %}
      <input class="mt-3 mb-5 btn btn-primary bg-base-blue" type="submit" form="form-edit" value="Buka Lowongan" />
    {% endif %}
  </div>

<script src="{% static 'ckeditor/ckeditor.js' %}"></script>

{% endblock %}

{% block script %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
<script>
  // wait for the document to be ready
  $(document).ready(function() {
    // check if there are any toasts
    if ($('.toast').length) {
      // show the toast container
      $('.toast').toast('show');
    }
  });
</script>
{% endblock script  %}
